(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"034f":function(t,e,a){"use strict";a("64a9")},1:function(t,e,a){t.exports=a("56d7")},2:function(t,e){},3:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("HelloWorld")],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"container"},[a("h1",[t._v("Shareholder Data Visualizer")]),a("div",{staticClass:"col s6"},[a("form",{attrs:{action:"#"}},[a("div",{staticClass:"file-field input-field"},[a("div",{staticClass:"btn"},[a("span",[t._v("File")]),a("input",{ref:"fileInput",attrs:{disabled:0==t.isReady,type:"file"},on:{change:t.onFileChanged}})]),a("div",{staticClass:"file-path-wrapper"},[a("input",{staticClass:"file-path validate",attrs:{disabled:0==t.isReady,type:"text"}})])])]),a("br"),a("br"),a("div",{attrs:{id:"map"}})]),a("br"),a("div",{staticClass:"col s6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col s6"},[a("a",{staticClass:"btn",on:{click:t.saveFile}},[a("span",[t._v("Save raw data to file")])])]),a("div",{staticClass:"col s6"},[a("a",{staticClass:"btn cyan",on:{click:t.generateRandomData}},[a("span",[t._v("Generate random data")])])])])])])])},s=[],l=(a("28a5"),a("96cf"),a("3b8d")),c=(a("ac6a"),a("456d"),a("1146")),u=a.n(c),d=a("e11eb");a("a662");var h=d,p=a("21a6"),f=a("2ef0"),v=a.n(f),m={name:"HelloWorld",props:{},computed:{indexedPostalCode:function(){return Object.keys(this.geocodeData)}},data:function(){return{geocodeData:null,data:null,mapRef:null,fileData:null,isReady:!1,heatMap:null}},mounted:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n,r,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=a("bc3a");try{n="pk.eyJ1IjoiZGFmZm9kaWxpc3RpYyIsImEiOiJjam1kOGJ6M2YwbXRrM3Ztb2JwMHIzOTU5In0.mnbPSjRIinjgf8VBzPuHtg",r=h.map("map").setView([1.3521,103.8198],12),h.tileLayer("https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,accessToken:n}).addTo(r),this.mapRef=r}catch(o){console.error(o)}return t.next=4,e.get("https://raw.githubusercontent.com/xkjyeah/singapore-postal-codes/master/buildings.json").then((function(t){i.geocodeData=v.a.keyBy(t.data,"POSTAL"),i.isReady=!0})).catch((function(t){console.log(t)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){this.geocodeData=null,this.data=null,this.fileData=null},methods:{saveFile:function(){if(null!=this.data){var t=new Blob([JSON.stringify(this.data)],{type:"text/plain;charset=utf-8"});Object(p["saveAs"])(t,"shareholder-dataviz.txt")}},generateData:function(){for(var t=[],e=0,a=0;a<this.fileData.length;a++){var n=this.fileData[a];if("DEP AGENT"!=n[3]&&""!=n[7]&&null!=n[7]&&void 0!=n[7]){var r=n[7],i=this.geocodeData[r];if(null!=i||void 0!=i){var o=[i.LATITUDE,i.LONGITUDE],s=parseInt(n[8].split(",").join(""));s>e&&(e=s);var l={gpsCoord:o,shares:s};t.push(l)}}}t.length>0&&(this.fileData=null,this.data=t,this.weighShareholdings(e),h.heatLayer(this.data,{maxZoom:12}).addTo(this.mapRef))},weighShareholdings:function(t){var e=[];this.data.forEach((function(a){var n=[a.gpsCoord[0],a.gpsCoord[1],1*a.shares/t];e.push(n)})),this.data=e},generateRandomData:function(){this.heatMap&&(this.heatMap.remove(),this.heatMap=null),this.fileData=null,this.data=null;for(var t=5e3,e=this.indexedPostalCode,a=[],n=1;n<=t;n++){var r=this.getRandomIntInclusive(0,e.length-1),i=e[r],o=[this.geocodeData[i].LATITUDE,this.geocodeData[i].LONGITUDE],s=[o[0],o[1],Math.random()*t];a.push(s)}this.data=a,this.heatMap=h.heatLayer(this.data,{max:t}).addTo(this.mapRef)},onFileChanged:function(){var t=this,e=event.target.files[0],a=new FileReader;a.onload=function(e){for(var a=e.target.result,n=u.a.read(a,{type:"binary"}),r=n.SheetNames[0],i=n.Sheets[r],o=u.a.utils.sheet_to_json(i,{header:1,blankrows:!1}),s=1;s<=6;s++)o.shift();t.fileData=o,t.generateData()},a.readAsBinaryString(e)},getRandomIntInclusive:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}}},g=m,b=(a("7306"),a("2877")),y=Object(b["a"])(g,o,s,!1,null,"0c823aab",null),w=y.exports,x={name:"app",components:{HelloWorld:w}},D=x,O=(a("034f"),Object(b["a"])(D,r,i,!1,null,null,null)),j=O.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(j)}}).$mount("#app")},"64a9":function(t,e,a){},7306:function(t,e,a){"use strict";a("9d4f")},"9d4f":function(t,e,a){}});
//# sourceMappingURL=app.27792cd9.js.map